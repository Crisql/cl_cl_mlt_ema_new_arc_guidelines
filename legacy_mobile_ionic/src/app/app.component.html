<ion-app>
    <ion-split-pane contentId="main-content">
        <ion-menu contentId="main-content" type="overlay" menuId="mainMenu">
            <ion-content>
                <div class="ion-margin-bottom ion-padding" id="header">
                    <h6>{{ selectedCompany?.Name }}</h6>
                    <p>{{ loggedUser }}</p>
                    <div class="dates-container">
                        <span class="dates" *ngIf="lastLogin">{{ "PRINCIPAL.LASTLOGIN" | translate }}: {{ lastLogin | date: 'dd-MM-yyyy hh:mm:ss a'}}</span>
                        <span class="dates" *ngIf="lastSynchronization">{{ "PRINCIPAL.LASTSYNCHRONIZATION" | translate }}: {{ lastSynchronization | date: 'dd-MM-yyyy hh:mm:ss a'}}</span>
                       
                        <!-- NOTA!!! - Esta funcionalidad se comenta debido a que consume muchos datos - Isaac Herrera -->
                        <!-- <span class="dates" >{{ "PRINCIPAL.SPEEDTEST" | translate }}: {{ speedTestMbps }}/Mbps</span> -->
                    </div>
                </div>
                <div *ngFor="let p of appPages">

                    <!--CUANDO ES UN MENU SIN SUBMENUS-->
                    <ng-container *ngIf="p.Id !== 52 && p.Id !== 18 && (!p.Sons || p.Sons.length === 0)">
                        <ion-menu-toggle (click)="onClickMenuOption(p)" autoHide="false">
                            <ion-item detail="false" lines="none">
                                <ion-icon *ngIf="p.Icon" name="{{p.Icon}}"></ion-icon>&nbsp;
                                <ion-label class="menu-item">{{ p.Name }}</ion-label>
                            </ion-item>
                        </ion-menu-toggle>
                    </ng-container>

                    <!--CUANDO ES UN MENU DE REPORTES-->
                    <ng-container *ngIf="p.Id === 18" >
                            <ion-item (click)="p.Open = !p.Open; GetAppReports(p)" detail="false" [lines]="p.Open ? 'full' : 'none'">
                                <ion-icon *ngIf="p.Icon" name="{{p.Icon}}"></ion-icon>&nbsp;
                                <ion-label class="menu-item">{{ p.Name }}</ion-label>
                            </ion-item>
                    </ng-container>

                    <!--CUANDO ES UN MENU CON SUBMENUS-->
                    <ng-container *ngIf="p.Id !== 52 && p.Id !== 18 && p.Id !== 1 && p.Id !== 45 && p.Id !== 51 && p.Id !== 2 && p.Id !== 50 && p.Sons && p.Sons.length >= 0">
                        <ion-item (click)="p.Open = !p.Open" detail="false" [lines]="p.Open ? 'full' : 'none'">
                            <ion-icon slot="end" [name]="!p.Open ? 'chevron-forward' : 'chevron-down'"></ion-icon>
                            <ion-icon *ngIf="p.Icon" name="{{p.Icon}}"></ion-icon>&nbsp;
                            <ion-label class="menu-item">{{ p.Name }}</ion-label>
                        </ion-item>
                    </ng-container>

                    <!--CUANDO ES UN MENU DE CERRAR CESION-->
                    <ng-container *ngIf="p.Id === 52">
                        <ion-menu-toggle (click)="onClickLogout()" autoHide="false">
                            <ion-item detail="false" lines="none">
                                <ion-icon *ngIf="p.Icon" name="{{p.Icon}}"></ion-icon>&nbsp;
                                <ion-label class="menu-item">{{ p.Name }}</ion-label>
                            </ion-item>
                        </ion-menu-toggle>
                    </ng-container>

                    <!--CUANDO ES UN SUBMENU-->
                    <ng-container *ngIf="p.Open">
                        <ion-list>
                            <ion-menu-toggle *ngFor="let submenu of p.Sons" autoHide="false">
                                <ion-item (click)="onClickMenuOption(submenu)" lines="none" detail="false" *ngIf="submenu.Url === 1">
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <ion-icon *ngIf="submenu.Icon" name="{{submenu.Icon}}"></ion-icon>&nbsp;
                                    <ion-label class="ion-text-start">{{ submenu.Name }}</ion-label>
                                </ion-item>
                                <ion-item (click)="onClickSyncOption(submenu)" lines="none" detail="false" *ngIf="submenu.Url === 2">
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <ion-icon *ngIf="submenu.Icon" name="{{submenu.Icon}}"></ion-icon>&nbsp;
                                    <ion-label class="ion-text-start">{{ submenu.Name }}</ion-label>
                                </ion-item>
                            </ion-menu-toggle>
                        </ion-list>
                    </ng-container>
                </div>
            </ion-content>
        </ion-menu>
        <ion-router-outlet id="main-content"></ion-router-outlet>
    </ion-split-pane>
</ion-app>
